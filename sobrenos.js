const wrapper=document.querySelector(".wrapper"),carousel=document.querySelector(".carousel"),firstCardWidth=carousel.querySelector(".card").offsetWidth,arrowBtns=document.querySelectorAll(".wrapper i"),carouselChildrens=[...carousel.children];let isDragging=!1,isAutoPlay=!0,startX,startScrollLeft,timeoutId,cardPerView=Math.round(carousel.offsetWidth/firstCardWidth);carouselChildrens.slice(-cardPerView).reverse().forEach(e=>{carousel.insertAdjacentHTML("afterbegin",e.outerHTML)}),carouselChildrens.slice(0,cardPerView).forEach(e=>{carousel.insertAdjacentHTML("beforeend",e.outerHTML)}),carousel.classList.add("no-transition"),carousel.scrollLeft=carousel.offsetWidth,carousel.classList.remove("no-transition"),arrowBtns.forEach(e=>{e.addEventListener("click",()=>{carousel.scrollLeft+="left"==e.id?-firstCardWidth:firstCardWidth})});const dragStart=e=>{isDragging=!0,carousel.classList.add("dragging"),startX=e.pageX,startScrollLeft=carousel.scrollLeft},dragging=e=>{isDragging&&(carousel.scrollLeft=startScrollLeft-(e.pageX-startX))},dragStop=()=>{isDragging=!1,carousel.classList.remove("dragging")},infiniteScroll=()=>{0===carousel.scrollLeft?(carousel.classList.add("no-transition"),carousel.scrollLeft=carousel.scrollWidth-2*carousel.offsetWidth,carousel.classList.remove("no-transition")):Math.ceil(carousel.scrollLeft)===carousel.scrollWidth-carousel.offsetWidth&&(carousel.classList.add("no-transition"),carousel.scrollLeft=carousel.offsetWidth,carousel.classList.remove("no-transition")),clearTimeout(timeoutId),wrapper.matches(":hover")||autoPlay()},autoPlay=()=>{window.innerWidth<800||!isAutoPlay||(timeoutId=setTimeout(()=>carousel.scrollLeft+=firstCardWidth,2500))};autoPlay(),carousel.addEventListener("mousedown",dragStart),carousel.addEventListener("mousemove",dragging),document.addEventListener("mouseup",dragStop),carousel.addEventListener("scroll",infiniteScroll),wrapper.addEventListener("mouseenter",()=>clearTimeout(timeoutId)),wrapper.addEventListener("mouseleave",autoPlay);
